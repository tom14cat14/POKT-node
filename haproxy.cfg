global
    log /dev/log local0
    maxconn 4096
    daemon

resolvers dns
    nameserver google 8.8.8.8:53
    resolve_retries 3
    timeout resolve 1s
    timeout retry 1s
    hold valid 10s

defaults
    log     global
    mode    http
    option  httplog
    option  dontlognull
    timeout connect 5s
    timeout client  30s
    timeout server  30s
    retries 3

# ============================================
# SOLANA - Port 8081
# ============================================
frontend solana_frontend
    bind *:8081
    default_backend solana_backend

backend solana_backend
    http-request set-header Host side-soft-frog.solana-mainnet.quiknode.pro
    http-request set-path /b241ff120b524d5a1264af5fbc8d78ae75dcfc4e%[path]
    server quicknode side-soft-frog.solana-mainnet.quiknode.pro:443 ssl verify none sni str(side-soft-frog.solana-mainnet.quiknode.pro) resolvers dns init-addr last,libc
    server helius mainnet.helius-rpc.com:443 ssl verify none sni str(mainnet.helius-rpc.com) backup resolvers dns init-addr last,libc

# ============================================
# BSC - Port 8082
# ============================================
frontend bsc_frontend
    bind *:8082
    default_backend bsc_backend

backend bsc_backend
    http-request set-header Host bsc-dataseed1.binance.org
    server binance1 bsc-dataseed1.binance.org:443 ssl verify none sni str(bsc-dataseed1.binance.org) check inter 30s fall 3 rise 2 resolvers dns init-addr none
    server binance2 bsc-dataseed2.binance.org:443 ssl verify none sni str(bsc-dataseed2.binance.org) check inter 30s fall 3 rise 2 backup resolvers dns init-addr none

# ============================================
# opBNB - Port 8083
# ============================================
frontend opbnb_frontend
    bind *:8083
    default_backend opbnb_backend

backend opbnb_backend
    http-request set-header Host opbnb-mainnet-rpc.bnbchain.org
    server bnbchain opbnb-mainnet-rpc.bnbchain.org:443 ssl verify none sni str(opbnb-mainnet-rpc.bnbchain.org) check inter 30s fall 3 rise 2 resolvers dns init-addr none
    server publicnode opbnb.publicnode.com:443 ssl verify none sni str(opbnb.publicnode.com) check inter 30s fall 3 rise 2 backup resolvers dns init-addr none

# ============================================
# Stats Page - Port 8404
# ============================================
frontend stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 10s
